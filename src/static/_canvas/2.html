<!DOCTYPE html>
<html lang="ja" class="no-js">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width">
<title></title>
<style>
body{margin: 0;padding: 0;}
canvas{display: block;}
</style>
</head>
<body>

<div id="bg"></div>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
<!-- <script src="createjs-2013.05.14.min.js"></script> -->
<script src="http://code.createjs.com/easeljs-0.6.1.min.js"></script>
<script>

var ns = {};

var DOT_RADIUS = 5;

var RAF = ( function(){
  return window.requestAnimationFrame       ||
         window.webkitRequestAnimationFrame ||
         function( callback ){
             window.setTimeout( callback, 1000.0 / 60.0 );
         };
} )();

ns.Player = function ( id ) {
  this.id = id;
  this.points = [];
}

init();

function init () {
  ns.$el = $( '#bg' );
  ns.$canvas = $( '<canvas/>' );
  ns.$el.append( ns.$canvas );

  ns.$canvas.attr( {
    'width' : window.innerWidth,
    'height': window.innerHeight
  } );

  ns.ctx = ns.$canvas[ 0 ].getContext( '2d' );
  ns.mouseX = ns.mouseY = 0;
  ns.me = new Player( 'ME' );
  setInterval( plot, 1000 );
  drawPoints();
}

function plot () {
  var data = {
    x: ns.mouseX,
    y: ns.mouseY,
    timestamp: Date.now()
  }
  me.points.push( data );
  if ( points.length > 4 ) {
    me.points.shift();
  }
  drawPoints();
}

$( window ).on( 'mousemove', function ( e ) {
  ns.mouseX = e.clientX;
  ns.mouseY = e.clientY;
} );

// point = [
//   { x: 100, y: 100, timeStamp: 0 },
//   { x: 200, y: 200, timeStamp: 1000 },
//   { x: 200, y: 100, timeStamp: 2000 }
// ]



function drawPoints () {
  // requestAnimationFrame( drawPoints );
  var now = Date.now();

  ns.$canvas[ 0 ].width = ns.$canvas[ 0 ].width;
  var color1 = [ 82, 204, 186 ];
  var color2 = [ 255, 248, 59 ];
  ns.ctx.save();

  for ( var i = 0, l = points.length; i < l; i ++ ) {
    var x = points[ i ].x;
    var y = points[ i ].y;
    ctx.beginPath();
    ctx.arc( x, y, DOT_RADIUS, 0, Math.PI * 2, false );
    ctx.fillStyle = 'rgba(128, 100, 162, 0.7)';
    ctx.fill();

    if ( i >= 1 ) {
      var x1 = points[ i - 1 ].x;
      var y1 = points[ i - 1 ].y;
      var x2 = points[ i ].x;
      var y2 = points[ i ].y;
      // var lineLength = Math.pow( ( x2 - x1 )* ( x2 - x1 ) + ( y2 - y1 ) * ( y2 - y1 ), 0.5 );
      var grad  = ctx.createLinearGradient( 0, 0, x1 - x2, y1 - y2 );
      grad.addColorStop( 0, 'rgb(192, 80, 77)' );
      grad.addColorStop( 1, 'rgb(128, 100, 162)' );

      ctx.beginPath();
      ctx.lineWidth = 6;
      ctx.moveTo( x1, y1 );
      ctx.lineTo( x2, y2 );
      ctx.closePath();
      ctx.strokeStyle = grad;
      ctx.stroke();
    }
  }
  ctx.restore();

  function getColor( timeleft ) {

  }
}




</script>


</body>
</html>