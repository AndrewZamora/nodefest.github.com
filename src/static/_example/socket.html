<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<title>Socket.IO Sample</title>
<style>
.log {
  border: 1px solid #CCC;
  background: #EFEFEF;
  padding: 10px;
  font-size: 14px;
  height: 500px;
  overflow: scroll;
  margin: 20px 0;
}
.log p {
  margin: 5px 0;
}
</style>
</head>
<body>
<h2>クリックした座標を受け流すデモ</h2>
<h3>Log</h3>
<div class="log"></div>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
<script src="http://pxgrid.net:4567/socket.io/socket.io.js"></script>
<script>
var $log = $('.log');
function log(message) {
  if (typeof message === 'object') message = JSON.stringify(message);
  var $p = $('<p>').text(message).hide();
  $log.prepend($p);
  $p.slideDown();
}

var socket = io.connect('http://pxgrid.net:4567');

socket.on('connect', function () {
  log('connected');
});

socket.on('disconnect', function () {
  log('disconnected');
});

socket.on('message', function (d) {
  log(d);
});

var text = document.querySelector('input')
document.addEventListener('click', function(e) {
  var data = { x: e.pageX, y: e.pageY };
  log(data);
  socket.emit('message', data);
});
</script>
</body>
</html>
